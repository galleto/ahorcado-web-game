<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ahorcado - Juego en Español Optimizado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: 
                repeating-linear-gradient(transparent, transparent 24px, #d4d4d4 24px, #d4d4d4 25px),
                repeating-linear-gradient(90deg, transparent, transparent 24px, #d4d4d4 24px, #d4d4d4 25px),
                #fff;
            background-size: 25px 25px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
            overflow-x: hidden;
        }

        .notebook-bg {
            background: transparent;
            padding: 20px;
            max-width: 1000px;
            width: 100%;
            max-height: 95vh;
            overflow-y: auto;
        }

        @media (max-width: 768px) {
            .notebook-bg {
                padding: 15px;
                max-height: 100vh;
            }
        }

        #splash-screen {
            text-align: center;
            position: relative;
        }

        #splash-screen h1 {
            font-size: 4em;
            color: #2c3e50;
            margin: 30px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            position: relative;
            z-index: 10;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
        }

        .repo-link {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 8px;
            border: 2px solid #3498db;
        }

        .repo-link a {
            color: #3498db;
            text-decoration: none;
            font-size: 1.1em;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: color 0.3s;
        }

        .repo-link a:hover {
            color: #2980b9;
        }

        .repo-link svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        @media (max-width: 768px) {
            #splash-screen h1 {
                font-size: 2.5em;
                margin: 20px 0;
                padding: 15px;
            }
            .repo-link {
                padding: 12px;
                margin: 15px 0;
            }
            .repo-link a {
                font-size: 1em;
            }
            .repo-link svg {
                width: 20px;
                height: 20px;
            }
        }

        @media (max-width: 480px) {
            #splash-screen h1 {
                font-size: 2em;
                margin: 15px 0;
                padding: 10px;
            }
            .repo-link {
                padding: 10px;
                margin: 10px 0;
            }
            .repo-link a {
                font-size: 0.9em;
                flex-direction: column;
                gap: 5px;
            }
        }

        .word-carousel {
            height: 50px;
            overflow: hidden;
            position: relative;
            opacity: 0.4;
        }

        .word-carousel-top {
            margin-bottom: 20px;
        }

        .word-carousel-bottom {
            margin-top: 20px;
        }

        .word-carousel-inner {
            display: flex;
            flex-direction: column;
            animation: scroll-words 60s linear infinite;
        }

        .word-carousel-inner.reverse {
            animation: scroll-words-reverse 60s linear infinite;
        }

        .carousel-word {
            font-size: 1.5em;
            color: #7f8c8d;
            font-weight: bold;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-transform: uppercase;
        }

        @media (max-width: 768px) {
            .word-carousel {
                height: 40px;
            }
            .carousel-word {
                font-size: 1.2em;
                height: 40px;
            }
            .word-carousel-top {
                margin-bottom: 15px;
            }
            .word-carousel-bottom {
                margin-top: 15px;
            }
        }

        @media (max-width: 480px) {
            .word-carousel {
                height: 35px;
            }
            .carousel-word {
                font-size: 1em;
                height: 35px;
            }
        }

        @keyframes scroll-words {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(-50%);
            }
        }

        @keyframes scroll-words-reverse {
            0% {
                transform: translateY(-50%);
            }
            100% {
                transform: translateY(0);
            }
        }

        .word-carousel:hover .word-carousel-inner {
            animation-play-state: paused;
        }

        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            font-size: 1.2em;
            font-family: 'Courier New', monospace;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s;
        }

        @media (max-width: 768px) {
            .btn {
                padding: 12px 25px;
                font-size: 1.1em;
                margin: 8px;
            }
        }

        @media (max-width: 480px) {
            .btn {
                padding: 10px 20px;
                font-size: 1em;
                margin: 5px;
                width: 90%;
                max-width: 250px;
            }
        }

        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }

        .btn-secondary {
            background: #95a5a6;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        #instructions {
            display: none;
        }

        #instructions h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        #instructions p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #34495e;
            font-size: 1em;
        }

        @media (max-width: 768px) {
            #instructions h2 {
                font-size: 1.6em;
                margin-bottom: 15px;
            }
            #instructions p {
                font-size: 0.95em;
                line-height: 1.6;
                margin-bottom: 12px;
            }
        }

        @media (max-width: 480px) {
            #instructions h2 {
                font-size: 1.4em;
                margin-bottom: 12px;
            }
            #instructions p {
                font-size: 0.9em;
                line-height: 1.5;
                margin-bottom: 10px;
            }
        }

        #game-screen {
            display: none;
        }

        .game-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .game-header h2 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .stat {
            font-size: 1.1em;
            color: #34495e;
        }

        @media (max-width: 768px) {
            .game-header h2 {
                font-size: 1.5em;
            }
            .stats {
                gap: 15px;
                font-size: 0.95em;
            }
            .stat {
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            .game-header h2 {
                font-size: 1.3em;
            }
            .stats {
                gap: 10px;
            }
            .stat {
                font-size: 0.9em;
            }
        }

        .stat .correct {
            color: #27ae60;
            font-weight: bold;
        }

        .stat .wrong {
            color: #e74c3c;
            font-weight: bold;
        }

        #hangman-canvas {
            display: block;
            margin: 0 auto 20px;
            border: 2px solid #2c3e50;
            border-radius: 5px;
            background: white;
            max-width: 100%;
            height: auto;
        }

        @media (max-width: 768px) {
            #hangman-canvas {
                width: 250px;
                height: 250px;
                margin-bottom: 15px;
            }
        }

        @media (max-width: 480px) {
            #hangman-canvas {
                width: 200px;
                height: 200px;
                margin-bottom: 10px;
            }
        }

        .word-display {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .letter-box {
            width: 40px;
            height: 50px;
            border-bottom: 3px solid #2c3e50;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            font-weight: bold;
            color: #2c3e50;
        }

        @media (max-width: 768px) {
            .word-display {
                gap: 8px;
                margin: 20px 0;
            }
            .letter-box {
                width: 35px;
                height: 45px;
                font-size: 1.8em;
            }
        }

        @media (max-width: 480px) {
            .word-display {
                gap: 6px;
                margin: 15px 0;
            }
            .letter-box {
                width: 28px;
                height: 38px;
                font-size: 1.5em;
                border-bottom: 2px solid #2c3e50;
            }
        }

        .used-letters {
            text-align: center;
            margin: 20px 0;
            color: #7f8c8d;
            font-size: 1em;
        }

        .used-letters span {
            margin: 0 5px;
            font-size: 1.1em;
        }

        .hint-section {
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #fff3cd;
            border: 2px dashed #ffc107;
            border-radius: 10px;
        }

        .hint-section strong {
            color: #856404;
        }

        .hint-section span {
            color: #856404;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            .used-letters {
                font-size: 0.9em;
                margin: 15px 0;
            }
            .used-letters span {
                font-size: 1em;
                margin: 0 3px;
            }
            .hint-section {
                padding: 12px;
                margin: 15px 0;
            }
            .hint-section span {
                font-size: 1em;
            }
        }

        @media (max-width: 480px) {
            .used-letters {
                font-size: 0.85em;
                margin: 10px 0;
            }
            .used-letters span {
                font-size: 0.95em;
                margin: 0 2px;
            }
            .hint-section {
                padding: 10px;
                margin: 10px 0;
                font-size: 0.9em;
            }
            .hint-section span {
                font-size: 0.95em;
            }
        }

        .keyboard {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 30px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            align-items: center;
        }

        .keyboard-row {
            display: flex;
            gap: 6px;
            justify-content: center;
        }

        .keyboard-row:nth-child(2) {
            margin-left: 20px;
        }

        .keyboard-row:nth-child(3) {
            margin-left: 40px;
        }

        .key {
            padding: 15px 12px;
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
            color: #2c3e50;
            min-height: 50px;
            min-width: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media (max-width: 768px) {
            .keyboard {
                gap: 6px;
                margin-top: 20px;
                max-width: 100%;
            }
            .keyboard-row {
                gap: 5px;
            }
            .keyboard-row:nth-child(2) {
                margin-left: 15px;
            }
            .keyboard-row:nth-child(3) {
                margin-left: 30px;
            }
            .key {
                padding: 12px 10px;
                font-size: 1.1em;
                min-height: 45px;
                min-width: 38px;
            }
        }

        @media (max-width: 480px) {
            .keyboard {
                gap: 4px;
                margin-top: 15px;
            }
            .keyboard-row {
                gap: 3px;
            }
            .keyboard-row:nth-child(2) {
                margin-left: 10px;
            }
            .keyboard-row:nth-child(3) {
                margin-left: 20px;
            }
            .key {
                padding: 10px 6px;
                font-size: 0.95em;
                min-height: 40px;
                min-width: 30px;
                border-width: 1px;
            }
        }

        @media (max-width: 360px) {
            .keyboard-row {
                gap: 2px;
            }
            .keyboard-row:nth-child(2) {
                margin-left: 8px;
            }
            .keyboard-row:nth-child(3) {
                margin-left: 15px;
            }
            .key {
                padding: 8px 4px;
                font-size: 0.85em;
                min-height: 35px;
                min-width: 26px;
            }
        }

        .key:hover:not(.disabled) {
            background: #d5dbdb;
            transform: scale(1.05);
        }

        .key.correct {
            background: #2ecc71;
            color: white;
            border-color: #27ae60;
        }

        .key.wrong {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }

        .key.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 10px;
            text-align: center;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-content h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 2em;
        }

        .modal-content p {
            margin: 15px 0;
            font-size: 1.1em;
            color: #34495e;
        }

        .modal-content input {
            width: 100%;
            padding: 10px;
            margin: 15px 0;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 1em;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 768px) {
            .modal-content {
                padding: 30px 20px;
                max-width: 95%;
            }
            .modal-content h2 {
                font-size: 1.8em;
                margin-bottom: 15px;
            }
            .modal-content p {
                font-size: 1em;
                margin: 12px 0;
            }
        }

        @media (max-width: 480px) {
            .modal {
                padding: 10px;
            }
            .modal-content {
                padding: 25px 15px;
            }
            .modal-content h2 {
                font-size: 1.5em;
                margin-bottom: 12px;
            }
            .modal-content p {
                font-size: 0.95em;
                margin: 10px 0;
            }
            .modal-content input {
                padding: 8px;
                font-size: 0.95em;
            }
        }

        .leaderboard {
            margin-top: 20px;
            text-align: left;
        }

        .leaderboard h3 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .leaderboard-entry {
            padding: 8px;
            margin: 5px 0;
            background: #ecf0f1;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            font-size: 0.95em;
        }

        @media (max-width: 480px) {
            .leaderboard h3 {
                font-size: 1.1em;
            }
            .leaderboard-entry {
                padding: 6px;
                font-size: 0.85em;
            }
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="notebook-bg">
        <div id="splash-screen">
            <div class="word-carousel word-carousel-top">
                <div class="word-carousel-inner" id="word-carousel-top"></div>
            </div>
            
            <h1>AHORCADO</h1>

            <div class="repo-link">
                <a href="https://github.com/galleto/ahorcado-web-game" target="_blank" rel="noopener noreferrer">
                    <svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    Ver código en GitHub: galleto/ahorcado-web-game
                </a>
            </div>
            
            <div class="word-carousel word-carousel-bottom">
                <div class="word-carousel-inner reverse" id="word-carousel-bottom"></div>
            </div>
            
            <button class="btn" onclick="showInstructions()">CÓMO SE JUEGA</button>
            <button class="btn" onclick="startGame()">JUGAR</button>
        </div>

        <div id="instructions">
            <h2>CÓMO SE JUEGA</h2>
            <p><strong>Objetivo:</strong> Adivina la palabra oculta antes de completar el dibujo del ahorcado.</p>
            <p><strong>Reglas:</strong></p>
            <p>• Tienes 6 oportunidades para equivocarte.</p>
            <p>• Selecciona letras usando el teclado en pantalla o tu teclado físico.</p>
            <p>• Las letras correctas se mostrarán en verde.</p>
            <p>• Las letras incorrectas se mostrarán en rojo y agregarán una parte al ahorcado.</p>
            <p>• ¡Intenta adivinar la palabra antes de que se complete el dibujo!</p>
            <button class="btn" onclick="startGame()">EMPEZAR A JUGAR</button>
            <button class="btn btn-secondary" onclick="showSplash()">VOLVER</button>
        </div>

        <div id="game-screen">
            <div class="game-header">
                <h2>AHORCADO</h2>
                <div class="stats">
                    <div class="stat">Aciertos: <span class="correct" id="correct-count">0</span></div>
                    <div class="stat">Errores: <span class="wrong" id="wrong-count">0</span></div>
                    <div class="stat">Intentos restantes: <span id="attempts-left">6</span></div>
                </div>
            </div>

            <canvas id="hangman-canvas" width="300" height="300"></canvas>

            <div class="word-display" id="word-display"></div>

            <div class="hint-section">
                <strong>Pista:</strong> 
                <span id="hint-text"></span>
            </div>

            <div class="used-letters">
                <strong>Letras usadas:</strong> <span id="used-letters"></span>
            </div>

            <div class="keyboard" id="keyboard"></div>

            <div style="text-align: center; margin-top: 20px;">
                <button class="btn btn-secondary" onclick="showSplash()">VOLVER AL MENÚ</button>
            </div>
        </div>
    </div>

    <div class="modal" id="game-over-modal">
        <div class="modal-content">
            <h2 id="result-title"></h2>
            <p id="result-message"></p>
            <p id="result-stats"></p>
            <input type="text" id="player-name" placeholder="Ingresa tu nombre" maxlength="20">
            <button class="btn" onclick="saveScore()">GUARDAR PUNTUACIÓN</button>
            <button class="btn btn-secondary" onclick="playAgain()">JUGAR DE NUEVO</button>
            <div class="leaderboard" id="leaderboard">
                <h3>MARCADOR</h3>
                <div id="leaderboard-list"></div>
            </div>
        </div>
    </div>

    <script>
        const normalizarPalabra = (palabra) => {
            return palabra.normalize('NFC').toUpperCase().trim();
        };

        const normalizarLetra = (letra) => {
            return letra.normalize('NFC').toUpperCase().trim();
        };

        const palabras = [
            {word: "ADIÓS", hint: "Lo que dices cuando te vas"},
            {word: "AGUA", hint: "Líquido transparente que bebes"},
            {word: "AHORA", hint: "En este momento"},
            {word: "AMAR", hint: "Sentir cariño profundo"},
            {word: "AMIGO", hint: "Persona con la que te llevas bien"},
            {word: "APRENDER", hint: "Adquirir conocimientos"},
            {word: "ÁRBOL", hint: "Planta grande con tronco"},
            {word: "AUTOBÚS", hint: "Vehículo de transporte público"},
            {word: "AYER", hint: "El día antes de hoy"},
            {word: "BOLÍGRAFO", hint: "Instrumento para escribir con tinta"},
            {word: "BONITO", hint: "Algo agradable a la vista"},
            {word: "BUENO", hint: "Lo contrario de malo"},
            {word: "CABEZA", hint: "Parte superior del cuerpo"},
            {word: "CALLE", hint: "Vía pública en la ciudad"},
            {word: "CAMA", hint: "Mueble donde duermes"},
            {word: "CANCIÓN", hint: "Pieza musical con letra"},
            {word: "CASA", hint: "Lugar donde vives"},
            {word: "CIUDAD", hint: "Área urbana grande"},
            {word: "COCHE", hint: "Vehículo de cuatro ruedas"},
            {word: "COLEGIO", hint: "Lugar donde estudian niños"},
            {word: "COMIDA", hint: "Lo que comes para alimentarte"},
            {word: "CONTENTO", hint: "Sentirse feliz"},
            {word: "CORRER", hint: "Moverse rápido con las piernas"},
            {word: "COSA", hint: "Objeto o asunto indefinido"},
            {word: "CHICA", hint: "Mujer joven"},
            {word: "CHICO", hint: "Hombre joven"},
            {word: "DAR", hint: "Entregar algo a alguien"},
            {word: "DECIR", hint: "Expresar con palabras"},
            {word: "DEPORTE", hint: "Actividad física y competitiva"},
            {word: "DÍA", hint: "Período de 24 horas"},
            {word: "DIFÍCIL", hint: "Lo contrario de fácil"},
            {word: "DINERO", hint: "Monedas y billetes"},
            {word: "FÁCIL", hint: "Que no requiere esfuerzo"},
            {word: "FAMILIA", hint: "Grupo de personas emparentadas"},
            {word: "FEO", hint: "Lo contrario de bonito"},
            {word: "FIESTA", hint: "Celebración con gente"},
            {word: "FLOR", hint: "Parte colorida de las plantas"},
            {word: "FUERTE", hint: "Que tiene mucha fuerza"},
            {word: "GALLETA", hint: "Dulce crujiente para comer"},
            {word: "GENTE", hint: "Conjunto de personas"},
            {word: "GRANDE", hint: "De mucho tamaño"},
            {word: "GUSTAR", hint: "Agradar o complacer"},
            {word: "HABER", hint: "Verbo auxiliar"},
            {word: "HABITACIÓN", hint: "Cuarto de una casa"},
            {word: "HABLAR", hint: "Comunicarse con palabras"},
            {word: "HACER", hint: "Realizar o ejecutar algo"},
            {word: "HERMANA", hint: "Hija de tus mismos padres"},
            {word: "HERMANO", hint: "Hijo de tus mismos padres"},
            {word: "HIJA", hint: "Descendiente femenina"},
            {word: "HIJO", hint: "Descendiente masculino"},
            {word: "HOGAR", hint: "Casa donde vive la familia"},
            {word: "HOLA", hint: "Saludo informal"},
            {word: "HOMBRE", hint: "Persona adulta masculina"},
            {word: "HOY", hint: "El día presente"},
            {word: "INTELIGENTE", hint: "Persona muy lista"},
            {word: "IR", hint: "Moverse de un lugar a otro"},
            {word: "JUGAR", hint: "Divertirse con juegos"},
            {word: "LÁPIZ", hint: "Instrumento para escribir de grafito"},
            {word: "LEER", hint: "Interpretar textos escritos"},
            {word: "LIBRO", hint: "Conjunto de hojas con texto"},
            {word: "LLORAR", hint: "Derramar lágrimas"},
            {word: "MADRE", hint: "Mujer que tiene hijos"},
            {word: "MALO", hint: "Lo contrario de bueno"},
            {word: "MAÑANA", hint: "El día después de hoy"},
            {word: "MAR", hint: "Gran masa de agua salada"},
            {word: "MUJER", hint: "Persona adulta femenina"},
            {word: "MÚSICA", hint: "Arte de combinar sonidos"},
            {word: "NIÑO", hint: "Persona de corta edad"},
            {word: "NOCHE", hint: "Período de oscuridad"},
            {word: "NOMBRE", hint: "Palabra que identifica a una persona"},
            {word: "NUEVO", hint: "Recién hecho o comprado"},
            {word: "NÚMERO", hint: "Símbolo matemático"},
            {word: "NUNCA", hint: "En ningún momento"},
            {word: "PADRE", hint: "Hombre que tiene hijos"},
            {word: "PAGAR", hint: "Dar dinero por algo"},
            {word: "PAPELERA", hint: "Recipiente para basura"},
            {word: "PARAR", hint: "Detenerse o cesar"},
            {word: "PENSAR", hint: "Reflexionar con la mente"},
            {word: "PEQUEÑO", hint: "De poco tamaño"},
            {word: "PERO", hint: "Conjunción adversativa"},
            {word: "PONER", hint: "Colocar algo en un lugar"},
            {word: "PREGUNTAR", hint: "Hacer una pregunta"},
            {word: "PUERTA", hint: "Entrada a una habitación"},
            {word: "RÁPIDO", hint: "Que se mueve velozmente"},
            {word: "RELOJ", hint: "Aparato que marca la hora"},
            {word: "RESPONDER", hint: "Contestar a una pregunta"},
            {word: "ROPA", hint: "Prendas que vistes"},
            {word: "SENTAR", hint: "Poner el cuerpo sobre algo"},
            {word: "SENTIR", hint: "Experimentar emociones"},
            {word: "SER", hint: "Verbo de existencia"},
            {word: "SÍ", hint: "Afirmación o aprobación"},
            {word: "SILLA", hint: "Mueble para sentarse"},
            {word: "SITIO", hint: "Lugar o espacio"},
            {word: "SONRISA", hint: "Gesto de alegría en la cara"},
            {word: "TARDE", hint: "Período entre mediodía y noche"},
            {word: "TELÉFONO", hint: "Aparato para llamar"},
            {word: "TELEVISIÓN", hint: "Aparato para ver programas"},
            {word: "TIENDA", hint: "Local donde se vende"},
            {word: "TRABAJAR", hint: "Realizar una actividad laboral"},
            {word: "VENIR", hint: "Moverse hacia aquí"},
            {word: "ZAPATO", hint: "Calzado que protege el pie"},
            {word: "AÑO", hint: "Período de 12 meses"},
            {word: "BAÑO", hint: "Habitación con ducha o bañera"},
            {word: "NIÑA", hint: "Persona joven de sexo femenino"},
            {word: "MONTAÑA", hint: "Elevación natural del terreno"},
            {word: "SUEÑO", hint: "Estado de reposo o deseo"},
            {word: "ESPAÑOL", hint: "Idioma que hablas ahora"},
            {word: "ENSEÑAR", hint: "Transmitir conocimientos"},
            {word: "COMPAÑERO", hint: "Persona que acompaña"}
        ].map(p => ({word: normalizarPalabra(p.word), hint: p.hint}));

        let currentWord = '';
        let currentHint = '';
        let guessedLetters = new Set();
        let wrongGuesses = 0;
        let correctGuesses = 0;
        let maxWrong = 6;
        let gameActive = false;
        let playedWords = JSON.parse(localStorage.getItem('ahorcado-played-words') || '[]');

        let audioContext = null;

        function initAudioContext() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        function playSound(type) {
            initAudioContext();
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            if (type === 'correct') {
                oscillator.frequency.value = 523.25;
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.3);
            } else if (type === 'wrong') {
                oscillator.frequency.value = 196;
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.5);
            } else if (type === 'win') {
                const notes = [523.25, 587.33, 659.25, 783.99];
                notes.forEach((freq, i) => {
                    const osc = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    osc.connect(gain);
                    gain.connect(audioContext.destination);
                    osc.frequency.value = freq;
                    gain.gain.setValueAtTime(0.2, audioContext.currentTime + i * 0.15);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.15 + 0.3);
                    osc.start(audioContext.currentTime + i * 0.15);
                    osc.stop(audioContext.currentTime + i * 0.15 + 0.3);
                });
            } else if (type === 'lose') {
                const notes = [392, 349.23, 329.63, 293.66];
                notes.forEach((freq, i) => {
                    const osc = audioContext.createOscillator();
                    const gain = audioContext.createGain();
                    osc.connect(gain);
                    gain.connect(audioContext.destination);
                    osc.frequency.value = freq;
                    gain.gain.setValueAtTime(0.2, audioContext.currentTime + i * 0.2);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + i * 0.2 + 0.4);
                    osc.start(audioContext.currentTime + i * 0.2);
                    osc.stop(audioContext.currentTime + i * 0.2 + 0.4);
                });
            }
        }

        function initWordCarousel() {
            const carouselTop = document.getElementById('word-carousel-top');
            const carouselBottom = document.getElementById('word-carousel-bottom');
            
            const shuffledTop = [...palabras].sort(() => Math.random() - 0.5).slice(0, 20);
            const shuffledBottom = [...palabras].sort(() => Math.random() - 0.5).slice(0, 20);
            
            const wordsTop = [...shuffledTop, ...shuffledTop];
            const wordsBottom = [...shuffledBottom, ...shuffledBottom];
            
            carouselTop.innerHTML = wordsTop.map(w => 
                `<div class="carousel-word">${w.word}</div>`
            ).join('');
            
            carouselBottom.innerHTML = wordsBottom.map(w => 
                `<div class="carousel-word">${w.word}</div>`
            ).join('');
        }

        document.addEventListener('DOMContentLoaded', initWordCarousel);

        function showSplash() {
            document.getElementById('splash-screen').style.display = 'block';
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('game-screen').style.display = 'none';
        }

        function showInstructions() {
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('instructions').style.display = 'block';
            document.getElementById('game-screen').style.display = 'none';
        }

        function startGame() {
            initAudioContext();
            document.getElementById('splash-screen').style.display = 'none';
            document.getElementById('instructions').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            resetGame();
        }

        function resetGame() {
            playedWords = playedWords.map(w => normalizarPalabra(w));
            
            let availableWords = palabras.filter(w => !playedWords.includes(w.word));
            
            if (availableWords.length === 0) {
                playedWords = [];
                localStorage.setItem('ahorcado-played-words', JSON.stringify([]));
                availableWords = palabras;
            }
            
            const randomWord = availableWords[Math.floor(Math.random() * availableWords.length)];
            
            currentWord = randomWord.word;
            currentHint = randomWord.hint;
            
            playedWords.push(currentWord);
            localStorage.setItem('ahorcado-played-words', JSON.stringify(playedWords));
            
            guessedLetters = new Set();
            wrongGuesses = 0;
            correctGuesses = 0;
            gameActive = true;

            document.getElementById('correct-count').textContent = '0';
            document.getElementById('wrong-count').textContent = '0';
            document.getElementById('attempts-left').textContent = maxWrong;
            document.getElementById('used-letters').textContent = '';
            document.getElementById('hint-text').textContent = currentHint;

            createKeyboard();
            updateWordDisplay();
            drawHangman();
        }

        function createKeyboard() {
            const keyboard = document.getElementById('keyboard');
            keyboard.innerHTML = '';
            
            const rows = [
                'QWERTYUIOP',
                'ASDFGHJKLÑ',
                'ZXCVBNM'
            ];
            
            rows.forEach(row => {
                const rowDiv = document.createElement('div');
                rowDiv.className = 'keyboard-row';
                
                for (let letter of row) {
                    const normalizedLetter = normalizarLetra(letter);
                    const key = document.createElement('button');
                    key.className = 'key';
                    key.textContent = normalizedLetter;
                    key.onclick = () => guessLetter(normalizedLetter);
                    key.id = 'key-' + normalizedLetter;
                    rowDiv.appendChild(key);
                }
                
                keyboard.appendChild(rowDiv);
            });
        }

        function updateWordDisplay() {
            const display = document.getElementById('word-display');
            display.innerHTML = '';
            
            for (let letter of currentWord) {
                const box = document.createElement('div');
                box.className = 'letter-box';
                if (guessedLetters.has(letter)) {
                    box.textContent = letter;
                }
                display.appendChild(box);
            }
        }

        function guessLetter(letter) {
            if (!gameActive || guessedLetters.has(letter)) return;

            const normalizedLetter = normalizarLetra(letter);
            guessedLetters.add(normalizedLetter);
            
            const key = document.getElementById('key-' + normalizedLetter);
            if (key) {
                key.classList.add('disabled');
            }

            let letterFound = false;
            for (let wordLetter of currentWord) {
                if (normalizarLetra(wordLetter) === normalizedLetter) {
                    letterFound = true;
                    break;
                }
            }

            if (letterFound) {
                if (key) key.classList.add('correct');
                correctGuesses++;
                document.getElementById('correct-count').textContent = correctGuesses;
                playSound('correct');
            } else {
                if (key) key.classList.add('wrong');
                wrongGuesses++;
                document.getElementById('wrong-count').textContent = wrongGuesses;
                document.getElementById('attempts-left').textContent = maxWrong - wrongGuesses;
                drawHangman();
                playSound('wrong');
            }

            updateWordDisplay();
            updateUsedLetters();
            checkGameStatus();
        }

        function updateUsedLetters() {
            document.getElementById('used-letters').textContent = Array.from(guessedLetters).sort().join(', ');
        }

        function drawHangman() {
            const canvas = document.getElementById('hangman-canvas');
            if (window.innerWidth <= 480) {
                canvas.width = 200;
                canvas.height = 200;
            } else if (window.innerWidth <= 768) {
                canvas.width = 250;
                canvas.height = 250;
            } else {
                canvas.width = 300;
                canvas.height = 300;
            }
            
            const ctx = canvas.getContext('2d');
            const scale = canvas.width / 300;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.lineWidth = 3 * scale;
            ctx.strokeStyle = '#2c3e50';

            ctx.beginPath();
            ctx.moveTo(20 * scale, 280 * scale);
            ctx.lineTo(180 * scale, 280 * scale);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(60 * scale, 280 * scale);
            ctx.lineTo(60 * scale, 20 * scale);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(60 * scale, 20 * scale);
            ctx.lineTo(180 * scale, 20 * scale);
            ctx.stroke();

            ctx.beginPath();
            ctx.moveTo(180 * scale, 20 * scale);
            ctx.lineTo(180 * scale, 50 * scale);
            ctx.stroke();

            if (wrongGuesses > 0) {
                ctx.beginPath();
                ctx.arc(180 * scale, 70 * scale, 20 * scale, 0, Math.PI * 2);
                ctx.stroke();
            }

            if (wrongGuesses > 1) {
                ctx.beginPath();
                ctx.moveTo(180 * scale, 90 * scale);
                ctx.lineTo(180 * scale, 160 * scale);
                ctx.stroke();
            }

            if (wrongGuesses > 2) {
                ctx.beginPath();
                ctx.moveTo(180 * scale, 110 * scale);
                ctx.lineTo(150 * scale, 140 * scale);
                ctx.stroke();
            }

            if (wrongGuesses > 3) {
                ctx.beginPath();
                ctx.moveTo(180 * scale, 110 * scale);
                ctx.lineTo(210 * scale, 140 * scale);
                ctx.stroke();
            }

            if (wrongGuesses > 4) {
                ctx.beginPath();
                ctx.moveTo(180 * scale, 160 * scale);
                ctx.lineTo(150 * scale, 220 * scale);
                ctx.stroke();
            }

            if (wrongGuesses > 5) {
                ctx.beginPath();
                ctx.moveTo(180 * scale, 160 * scale);
                ctx.lineTo(210 * scale, 220 * scale);
                ctx.stroke();
            }
        }

        function checkGameStatus() {
            const uniqueLetters = new Set(currentWord.split('').map(l => normalizarLetra(l)));
            const wordComplete = Array.from(uniqueLetters).every(letter => guessedLetters.has(letter));

            if (wordComplete) {
                gameActive = false;
                showGameOver(true);
            } else if (wrongGuesses >= maxWrong) {
                gameActive = false;
                showGameOver(false);
            }
        }

        function showGameOver(won) {
            const modal = document.getElementById('game-over-modal');
            const title = document.getElementById('result-title');
            const message = document.getElementById('result-message');
            const stats = document.getElementById('result-stats');

            if (won) {
                title.textContent = '¡GANASTE!';
                title.style.color = '#27ae60';
                message.textContent = `Has acertado la palabra: ${currentWord}`;
                playSound('win');
            } else {
                title.textContent = 'GAME OVER';
                title.style.color = '#e74c3c';
                message.textContent = `La palabra era: ${currentWord}`;
                playSound('lose');
            }

            stats.textContent = `Aciertos: ${correctGuesses} | Errores: ${wrongGuesses}`;
            
            displayLeaderboard();
            modal.style.display = 'flex';
        }

        function saveScore() {
            const playerName = document.getElementById('player-name').value.trim();
            if (!playerName) {
                alert('Por favor ingresa tu nombre');
                return;
            }

            const scores = JSON.parse(localStorage.getItem('ahorcado-scores') || '[]');
            scores.push({
                name: playerName,
                correct: correctGuesses,
                wrong: wrongGuesses,
                date: new Date().toLocaleDateString()
            });

            scores.sort((a, b) => {
                if (b.correct !== a.correct) return b.correct - a.correct;
                return a.wrong - b.wrong;
            });

            localStorage.setItem('ahorcado-scores', JSON.stringify(scores.slice(0, 10)));
            displayLeaderboard();
            document.getElementById('player-name').value = '';
        }

        function displayLeaderboard() {
            const scores = JSON.parse(localStorage.getItem('ahorcado-scores') || '[]');
            const list = document.getElementById('leaderboard-list');
            
            if (scores.length === 0) {
                list.innerHTML = '<p style="text-align: center; color: #7f8c8d;">No hay puntuaciones guardadas</p>';
                return;
            }

            list.innerHTML = scores.map((score, index) => `
                <div class="leaderboard-entry">
                    <span>${index + 1}. ${score.name}</span>
                    <span>✓${score.correct} ✗${score.wrong}</span>
                </div>
            `).join('');
        }

        function playAgain() {
            document.getElementById('game-over-modal').style.display = 'none';
            resetGame();
        }

        document.addEventListener('keydown', (e) => {
            if (!gameActive) return;
            
            const letter = normalizarLetra(e.key);
            
            if (letter.length === 1 && /^[A-ZÑÁÉÍÓÚ]$/.test(letter)) {
                guessLetter(letter);
            }
        });

        window.addEventListener('resize', () => {
            if (gameActive) {
                drawHangman();
            }
        });
    </script>
</body>
</html>
